---
layout: layouts/base.njk
section: article-page
---

<article  class="article">
  <div class="article-info">
    <h1>{{ title }}</h1>
    <div class="meta-article">
      <span class="meta-date">
        <time datetime="{{ page.date | machineDate }}">{{ page.date | readableDate }}</time>
      </span>
      <span class="meta-tags"><span class="date-tags-separator">—</span>{% if tags %}
        {% for tag in tags %}
          {%- if tag != "post" -%}
            {% set tagUrl %}/tags/{{ tag }}/{% endset %}
            <a href="{{ tagUrl | url }}" rel="tag" class="meta-tag">{{ tag }}</a>
          {%- endif -%}
        {% endfor %}{% endif %}
      </span>
    </div>
  </div>

  
  {# Author by #}
  {# <p><small>by <a href="/authors/{{ author | slug }}/">{{ author }}</a></small></p> #}

  {{ layoutContent | safe }}

  <nav>
    <a href="{{ '/' | url }}">← Blog index</a>
  </nav>

</article>

<script>
const copyToClipboard = str => {
  const el = document.createElement('textarea'); // Create a <textarea> element
  el.value = str; // Set its value to the string that you want copied
  el.setAttribute('readonly', ''); // Make it readonly to be tamper-proof
  el.style.position = 'absolute';
  el.style.left = '-9999px'; // Move outside the screen to make it invisible
  document.body.appendChild(el); // Append the <textarea> element to the HTML document
  const selected =
    document.getSelection().rangeCount > 0 // Check if there is any content selected previously
      ? document.getSelection().getRangeAt(0) // Store selection if found
      : false; // Mark as false to know no selection existed before
  el.select(); // Select the <textarea> content
  document.execCommand('copy'); // Copy - only works as a result of a user action (e.g. click events)
  document.body.removeChild(el); // Remove the <textarea> element
  if (selected) {
    // If a selection existed before copying
    document.getSelection().removeAllRanges(); // Unselect everything on the HTML document
    document.getSelection().addRange(selected); // Restore the original selection
  }
};

function handleCopyClick(evt) {
  // get the children of the parent element
  const { children } = evt.target.parentElement;
  // grab the first element (we append the copy button on afterwards, so the first will be the code element)
  // destructure the innerText from the code block
  const { innerText } = Array.from(children)[0];

  // copy all of the code to the clipboard
  copyToClipboard(innerText);
  // alert to show it worked, but you can put any kind of tooltip/popup
  //alert(innerText);

  
  const body = document.querySelector('body');
  const success = document.createElement('div');
  success.className = "success";
  body.append(success);
  success.innerHTML = "Kopirano!";
  
  // close the div in 1 secs
  success.classList.add('show');

  window.setTimeout(function () {
    success.classList.remove('show');
  }, 1500);

}

// get the list of all highlight code blocks
const highlights = document.querySelectorAll('pre');
// add the copy button to each code block
highlights.forEach(pre => {
  // create the copy button
  const copy = document.createElement('button');
  const hr = document.createElement('hr');
  const message = document.createElement('span.message');
  copy.innerHTML = '<img src="/static/img/copy.svg">';
  // add the event listener to each click
  copy.addEventListener('click', handleCopyClick);
  // append the copy button to each code block
  pre.append(hr, copy);
});



</script>